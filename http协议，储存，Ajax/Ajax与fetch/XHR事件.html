<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p>1 load事件 响应数据可用时触发</p>
    <!-- ie9支持 -->
    <p>2 error事件 请求错误时触发</p>
    <!-- ie10支持 -->
    <!-- <script>
        const url = 'https://www.imooc.com/api/http/search/suggest?words=js';
        const url1 = 'https://www.iimooc.com/api/http/search/suggest?words=js';   //这个地址错的
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
                console.log('responseText:', xhr.responseText);
                console.log(JSON.parse(xhr.responseText));
            }
        };
        xhr.addEventListener('error', () => {
            console.log('error');
        }, false)
        // xhr.open('GET', url, true);
        xhr.open('GET', url1, true);

        xhr.send(null);
    </script> -->

    <p>3 abort事件 调用abort()方法终止请求时触发</p>
    <!-- ie10支持 -->
    <p>4 timeout事件 请求超时后触发</p>
    <!-- ie8支持 -->
    <script>
        const url2 = 'https://www.imooc.com/api/http/search/suggest?words=js';
        const xhr = new XMLHttpRequest();
        xhr.onreadystatechange = () => {
            if (xhr.readyState != 4) return;

            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
                console.log('responseText:', xhr.responseText);
                console.log(JSON.parse(xhr.responseText));
            }
        };

        xhr.addEventListener('abort', () => {
            console.log('abort');
        }, false);

        xhr.addEventListener('timeout', () => {
            console.log('timeout');
        }, false);

        xhr.open('GET', url2, true);

        xhr.timeout = 10;

        xhr.send(null);

        // xhr.abort();
    </script>
</body>

</html>